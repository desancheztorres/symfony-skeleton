; OPcache Configuration for Symfony Development
; Optimized for hot-reload during development

[opcache]
; Enable OPcache
opcache.enable = 1
opcache.enable_cli = 0

; Memory and file settings
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 16
opcache.max_accelerated_files = 20000

; Development settings (validate files on each request)
opcache.validate_timestamps = 1
opcache.revalidate_freq = 2
opcache.revalidate_path = 1

; Performance tuning
opcache.save_comments = 1
opcache.enable_file_override = 0
opcache.optimization_level = 0x7FFEBFFF
opcache.dups_fix = 0

; File cache (optional for persistent cache)
; opcache.file_cache = /tmp/opcache
; opcache.file_cache_only = 0
; opcache.file_cache_consistency_checks = 1

; JIT (Just-In-Time compilation) - PHP 8.0+
; Disabled in development to avoid potential issues
opcache.jit = 0
opcache.jit_buffer_size = 0

; Restart settings
opcache.force_restart_timeout = 180
opcache.error_log = /var/log/opcache.log
opcache.log_verbosity_level = 1

; Security
opcache.restrict_api = ""

; Advanced settings
opcache.max_file_size = 0
opcache.consistency_checks = 0
opcache.protect_memory = 0
opcache.huge_code_pages = 0

; Production overrides (commented for development)
; For production, uncomment these and set:
; opcache.validate_timestamps = 0
; opcache.revalidate_freq = 0  
; opcache.jit = tracing
; opcache.jit_buffer_size = 64M